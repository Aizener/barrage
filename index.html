<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<style>
  .box {
    width: 100%;
    height: 300px;
    background-color: skyblue;
  }
</style>
<body>
  <div class="box"></div>
  <button class="run">Run</button>
  <button class="clear">Clear</button>
  <button class="stop">Stop</button>
  <script src="./dist/index.umd.js"></script>
  <!-- <script type="module">
    import Barrage from './dist/index.esm.js'
    console.log(Barrage)
  </script> -->
  <script>
    const b = new Barrage('.box')
    let x = 0, y = 0
    b.addMessage({
      text: '这是浮层弹幕',
      type: Barrage.layer,
      style: {
        fontSize: Math.ceil(Math.random() * 8) + 20 + 'px',
        color: ['red', 'green', 'blue'][Math.floor(Math.random() * 3)]
      },
      layerStyle: {
        x: x,
        y: y
      }
    })
    setInterval(() => {
      b.addMessages([
        {
          text: '这是浮层弹幕',
          type: Barrage.layer,
          style: {
            fontSize: 20 + 'px',
            color: ['red', 'green', 'blue'][Math.floor(Math.random() * 3)]
          },
          layerStyle: {
            placement: 'center'
          }
        },
        {
          text: '这是浮层弹幕',
          type: Barrage.layer,
          style: {
            fontSize: 20 + 'px',
            color: ['red', 'green', 'blue'][Math.floor(Math.random() * 3)]
          },
          layerStyle: {
            x: Math.random() * 1500,
            y: Math.random() * 300
          }
        },
        {
          text: '这是浮层弹幕',
          type: Barrage.layer,
          style: {
            fontSize: 20 + 'px',
            color: ['red', 'green', 'blue'][Math.floor(Math.random() * 3)]
          },
          layerStyle: {
            x: Math.random() * 1500,
            y: Math.random() * 300
          }
        }
      ])
    }, 500)
    setInterval(() => {
      b.addMessages(['这是浮层弹幕1', '这是浮层弹幕2', '这是浮层弹幕3'])
    }, 500)
    b.run()

    document.querySelector('.run').addEventListener('click', () => {
      b.run()
    })
    document.querySelector('.clear').addEventListener('click', () => {
      b.clear()
    })
    document.querySelector('.stop').addEventListener('click', () => {
      b.stop()
    })
  </script>
</body>
</html>